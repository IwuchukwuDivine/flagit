import{_}from"./CxXxvqG7.js";import{g as b,V as h,o as l,c as u,a as e,b as i,w as n,d as r,l as c,j as y,k as x,F as m,t as v,W as k,p as f,A as w}from"./B412Jlrp.js";const C={class:"min-h-screen bg-gray-50"},N={class:"bg-white shadow-sm border-b border-gray-200"},S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},V={class:"flex justify-between items-center h-16"},B={class:"flex items-center space-x-8"},L={key:0,class:"flex items-center space-x-4"},F={class:"text-sm text-gray-700"},O=b({__name:"default",setup(T){const s=f(null),d=f(!0);async function g(){try{const a=await $fetch("/api/auth/me");s.value=a.user}catch{s.value=null}finally{d.value=!1}}async function p(){try{await $fetch("/api/auth/logout",{method:"POST"}),s.value=null,await w("/auth/login")}catch(a){console.error("Logout failed:",a)}}return h(()=>{g()}),(a,t)=>{const o=_;return l(),u("div",C,[e("nav",N,[e("div",S,[e("div",V,[e("div",B,[i(o,{to:"/",class:"text-xl font-bold text-blue-600"},{default:n(()=>[...t[0]||(t[0]=[r(" Speak Up ",-1)])]),_:1}),i(o,{to:"/",class:"text-gray-700 hover:text-blue-600"},{default:n(()=>[...t[1]||(t[1]=[r(" Feed ",-1)])]),_:1}),c(s)?(l(),y(o,{key:0,to:"/submit",class:"text-gray-700 hover:text-blue-600"},{default:n(()=>[...t[2]||(t[2]=[r(" Submit Complaint ",-1)])]),_:1})):x("",!0)]),c(d)?x("",!0):(l(),u("div",L,[c(s)?(l(),u(m,{key:0},[e("span",F,v(c(s).name),1),e("button",{onClick:p,class:"text-sm text-gray-700 hover:text-blue-600"}," Log Out ")],64)):(l(),u(m,{key:1},[i(o,{to:"/auth/login",class:"text-sm text-gray-700 hover:text-blue-600"},{default:n(()=>[...t[3]||(t[3]=[r(" Log In ",-1)])]),_:1}),i(o,{to:"/auth/register",class:"text-sm bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"},{default:n(()=>[...t[4]||(t[4]=[r(" Register ",-1)])]),_:1})],64))]))])])]),e("main",null,[k(a.$slots,"default")])])}}});export{O as default};
